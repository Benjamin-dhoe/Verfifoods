<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Verified</title>
  <meta content="Verify email" property="og:title">
  <meta content="Verify email" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="/css/verfifoods-4d83b7.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://use.typekit.net/nnx8vsx.js" type="text/javascript"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="/images/webclip.png" rel="apple-touch-icon">
  <link rel="stylesheet" href="https://use.typekit.net/nnx8vsx.css">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
</head>
<body class="body">
  <div class="logosolo">
    <a href="#" class="w-inline-block" id="loginlink"><img src="/images/logo-Verfifoods.png" loading="lazy" width="135" alt=""></a>
  </div>
  <section class="section-doublepart">
    <div class="containcenter doubleparts">
      <div class="doublepartsside centered">
        <h2 class="headingonwhite" id="title"></h2>
        <div id="text"></div>
      </div>
      <div class="doublepartsside right centered">
        <lottie-player
                class="lottie-animation"
                src="/images/emailsentlottie.json"
                background="transparent"
                speed="1"
                loop
                autoplay>
        </lottie-player>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=66d843f7aa41c71a1134cb81" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script type="module">
  import { auth } from '/js/firebase.js';
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";

onAuthStateChanged(auth, (user) => {
    if (user) {
        console.log("User is signed in:", user);
    } else {
        console.log("No user is signed in.");
    }
});
</script>
  <script>
const language = localStorage.getItem('language') || 'en';
    
const titleElement = document.getElementById("title");
const textElement = document.getElementById("text");

function getCookie(name) {
    let cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      let cookie = cookies[i].trim();
      // Check if the cookie's name matches the given name
      if (cookie.startsWith(name + '=')) {
        return cookie.split('=')[1];
      }
    }
    return null; // Return null if cookie is not found
  }

  const userId = getCookie('userId');
    // Check the 'lang' query value first
    if (language === 'nl') {
        titleElement.textContent = "Email succesvol geverifieerd";
        textElement.textContent = "U wordt zometeen herleid naar uw dashboard ...";
        setTimeout(() => {
          if (userId) {
            // Redirect to the user's dashboard if userId exists
            window.location.href = /nl/users/${userId};
          } else {
            // Otherwise, redirect to the login page
            window.location.href = '/nl/login.html';
          }
        }, 3000);
    } else if (language === 'fr') {
        titleElement.textContent = "E-mail vérifiée avec succès";
        textElement.textContent = "Vous serez redirigé vers votre tableau de bord sous peu...";
        setTimeout(() => {
          if (userId) {
            // Redirect to the user's dashboard if userId exists
            window.location.href = /users/${userId};
          } else {
            // Otherwise, redirect to the login page
            window.location.href = '/se-connecter.html';
          }
        }, 3000);
    } else {
        titleElement.textContent = "Email succesfully verified";
        textElement.textContent = "You will be redirected to your dashboard shortly...";
        setTimeout(() => {
          if (userId) {
            // Redirect to the user's dashboard if userId exists
            window.location.href = /en/users/${userId};
          } else {
            // Otherwise, redirect to the login page
            window.location.href = '/en/login.html';
          }
        }, 3000);
    }
</script>
</body>
</html>
