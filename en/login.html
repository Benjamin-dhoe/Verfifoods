<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Login</title>
  <meta content="Login" property="og:title">
  <meta content="Login" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="/css/verfifoods-4d83b7.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://use.typekit.net/nnx8vsx.js" type="text/javascript"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="/images/webclip.png" rel="apple-touch-icon">
  <link rel="stylesheet" href="https://use.typekit.net/nnx8vsx.css">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <script>
  function deleteCookie(cookieName) {
    document.cookie = cookieName + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
  }
  
  if (window.location.href.indexOf('?unauth') !== -1) {
      deleteCookie('token');
      deleteCookie('userId');
      var newUrl = window.location.href.replace('?unauth', '');
      window.history.replaceState({}, document.title, newUrl);
      window.location.reload();
  }
  </script>
</head>
<body class="body">
<div class="popupholder" id="popupresetpaswoord">
    <div class="popupcontainer vis">
        <div class="closebtn" id="closeresetpaswoord">X</div>
          <div class="leftalignflexvert">
            <label class="brownundertitle">Email</label>
            <input class="text-field w-input" maxlength="256" name="Email" type="email" id="EmailReset" required>
            <button id="resetpaswoord" class="button intypeholder notabs w-button">Reset password</button>
            <div class="loading" id="paswoordresetloading">
              <lottie-player
                src="/images/loading.json"
                background="transparent"
                speed="1"
                loop
                autoplay>
              </lottie-player>
            </div>
            <div class="w-form-fail" id="error-message-reset"></div>
          </div>
    </div>
  </div>
  <nav class="nav">
    <div class="holderlogofooter nav">
      <a href="/en/index.html" class="logofooter nav w-inline-block"><img loading="lazy" src="/images/logo-Verfifoods.png" alt=""></a><img id="openNavPhone" loading="lazy" alt="" src="/images/menuIcon.svg" class="menuicon">
    </div>
    <div class="navlinksholder">
      <a href="/en/index.html" aria-current="page" class="navlink w-inline-block w--current">
        <div>Home</div>
      </a>
      <a href="/en/assortment.html" class="navlink w-inline-block">
        <div>Products</div>
      </a>
      <div class="spaceholdercentralnav"></div>
      <a href="/en/contact.html" class="navlink w-inline-block">
        <div>Contact</div>
      </a>
      <a href="/en/login.html" class="navlink w-inline-block">
        <div>Login</div>
      </a>
    </div>
  </nav>
  <section id="formSection" class="section-doublepart minfullheight firsection">
    <div class="containcenter doubleparts">
      <div class="doublepartsside centered">
        <h1 class="headingonwhite">Welcome back!</h1>
        <div class="small-text">Not a customer yet? <a href="/en/sign-up-at-verfifoods.html" class="linkcolor hoverable">Click here</a> to become one</div>
      </div>
      <div class="doublepartsside right centered">
        <div>
          <form class="leftalignflexvert">
            <label for="Email" class="brownundertitle">Email</label>
            <input class="text-field w-input" maxlength="256" name="Email" type="email" id="Email" required>
            
            <label for="Password" class="brownundertitle">Password</label>
            <input class="w-input" maxlength="256" name="Password" type="password" id="Password" required>
            <div class="passwordresethold"><div id="openresetpaswoord">Forgot password?</div></div>
            <div class="loading" id="loginloading">
              <lottie-player
                src="/images/loading.json"
                background="transparent"
                speed="1"
                loop
                autoplay>
              </lottie-player>
            </div>
            <div class="w-form-fail" id="error-message"></div>
            <button class="button intypeholder notabs w-button" id="loginbtn">Login</button>
           </form>
        
          
        </div>
        <div class="holderoflines">
          <div class="line"></div>
          <div>Of</div>
          <div class="line"></div>
        </div>
        <a href="#" id="googlelogin" class="mapslink google w-inline-block"><img src="/images/2993685_brand_brands_google_logo_logos_icon.png" loading="lazy" width="22" alt="" class="socialmediaicon">
          <div>Login with Google</div>
        </a>
      </div>
    </div>
  </section>
  <footer class="section-blue-parent">
    <div class="bluesection footer">
      <div class="holderlogofooter"><img loading="lazy" src="/images/logo-Verfifoods.png" alt="" class="logofooter"></div>
      <div class="containcenter">
        <div class="footercontentholder">
          <div class="footerpart">
            <div class="brownundertitle white bold-text">Products</div>
            <div class="spacer10px"></div>
            <a href="/en/product-categories/baguettes-supplier.html" class="link-footer w-inline-block">
              <div class="brownundertitle white">Baguettes</div>
            </a>  
            <a href="/en/product-categories/viennoiserie-supplier.html" class="link-footer w-inline-block">
              <div class="brownundertitle white">Viennoiserie</div>
            </a>
            <a href="/en/product-categories/pastries-supplier.html" class="link-footer w-inline-block">
              <div class="brownundertitle white">Pastries</div>
            </a>
            <a href="/en/product-categories/bread-supplier.html" class="link-footer w-inline-block">
              <div class="brownundertitle white">Bread</div>
            </a>
            <a href="/en/product-categories/savory-snacks-supplier.html" class="link-footer w-inline-block">
              <div class="brownundertitle white">Savory snacks</div>
            </a>
            <a href="/en/product-categories/ice-cream-supplier.html" class="link-footer w-inline-block">
              <div class="brownundertitle white">Ice cream</div>
            </a>
            <a href="/en/product-categories/smoothies-supplier.html" class="link-footer w-inline-block">
              <div class="brownundertitle white">Smoothies</div>
            </a>
            <div class="spacer10px"></div>
            <a href="/en/assortment.html" class="button intypeholder notabs w-button">View all products</a>
          </div>
          <div class="footerpart">
            <a href="https://www.google.com/maps/place/Verfifoods/@50.7741454,4.5121968,597m/data=!3m2!1e3!4b1!4m6!3m5!1s0x47c3d9eea77f6083:0xea68d0e7bb7c37fe!8m2!3d50.774142!4d4.5147717!16s%2Fg%2F1vlz9jcj?entry=ttu&amp;g_ep=EgoyMDI0MDkwNC4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="mapslink w-inline-block">
              <div class="google-maps"></div>
              <div class="brownundertitle white">Sint-Annastraat 58, <br>3090 Overijse</div>
            </a>
            <div class="_100-widthcenter leftphone">
              <div class="leftalignflexvert">
                <div class="brownundertitle white bold-text">Opening hours</div>
                <div class="spacer10px"></div>
                <div class="brownundertitle white">Monday: 13:00 - 17:00</div>
                <div class="brownundertitle white">Tuesday: 13:00 - 17:00</div>
                <div class="brownundertitle white">Wednesday: 13:00 - 17:00</div>
                <div class="brownundertitle white">Thursday: 13:00 - 17:00</div>
                <div class="brownundertitle white">Fryday: 13:00 - 17:00</div>
              </div>
            </div>
            <div class="spacer10px"></div>
          </div>
          <div class="footerpart">
            <div class="brownundertitle white bold-text">Contact us</div>
            <div class="spacer10px"></div>
            <a href="mailto:info@verfifoods.be" class="link-footer w-inline-block">
              <div class="brownundertitle white">info@verfifoods.be</div>
            </a>
            <a href="tel:+32479770977" class="link-footer w-inline-block">
              <div class="brownundertitle white">GSM 0479770977</div>
            </a>
            <a href="tel:+3253875461" class="link-footer w-inline-block">
              <div class="brownundertitle white">TEL 026875461</div>
            </a>
            <div class="spacer10px"></div>
            <div class="spacer10px"></div>
            <div class="brownundertitle white bold-text">Social media</div>
            <a href="https://www.facebook.com/Verfifoods/" target="_blank" class="link-footer w-inline-block">
              <div class="brownundertitle white">Facebook</div>
            </a>
            <a href="https://www.instagram.com/verfifoods/?igsh=aTFxMDMyMmQzNGc5" target="_blank" class="link-footer w-inline-block">
              <div class="brownundertitle white">Instagram</div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script>
    const urlFR = "/se-connecter.html";
    const urlNL = "/nl/login.html";
    const urlEN = "/en/login.html";
  </script>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=66d843f7aa41c71a1134cb81" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="/js/index.js" type="text/javascript"></script>
  <script type="module">
  import { auth, app } from '/js/firebase.js';
  import { signInWithEmailAndPassword, sendPasswordResetEmail, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

function login(event) {
  event.preventDefault();
  const loginBtn = document.getElementById('loginbtn');
  const loginLoading = document.getElementById('loginloading');
  loginBtn.style.display = "none";
  loginLoading.style.display = "block";

  const email = document.getElementById('Email').value;
  const password = document.getElementById('Password').value;
  const errorMessageEl = document.getElementById('error-message');

  errorMessageEl.textContent = "";

  signInWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    const user = userCredential.user;

    return user.getIdToken().then((idToken) => ({ idToken, userId: user.uid }));
  })
  .then(({ idToken, userId }) => {
    // Set the cookies
    document.cookie = `token=${idToken}; path=/; Secure; SameSite=Strict; Max-Age=3600`;
    document.cookie = `userId=${userId}; path=/; Secure; SameSite=Strict; Max-Age=3600`;

    // Redirect the user
    window.location.href = `/en/users/${userId}`;
  })
  .catch((error) => {
    console.error("Login or redirect error:", error);
    errorMessageEl.textContent = "The email address or password you entered is incorrect. Please try again.";
    errorMessageEl.style.display = "block";
    loginBtn.style.display = "block";
    loginLoading.style.display = "none";
  });
}
  function resetPassword() {
    const email = document.getElementById('EmailReset').value;
    const errorMessageResetEl = document.getElementById('error-message-reset');
    

    if (!email) {
      errorMessageResetEl.style.display = "block";
      errorMessageResetEl.textContent = "Fill in your email for resetting your password";
      return;
    }

    document.getElementById('resetpaswoord').style.display = "none";
    document.getElementById('paswoordresetloading').style.display = "block";
    localStorage.setItem('lang', 'en');

    sendPasswordResetEmail(auth, email)
      .then(() => {
        window.location.href = "/ms/verify-email?lang=en&action=reset";
      })
      .catch((error) => {
        console.error("Password reset error:", error);
        errorMessageResetEl.textContent = "Error: " + error.message;
        errorMessageResetEl.style.display = "block";
      });
  }

  document.getElementById('loginbtn').addEventListener('click', login);
  document.getElementById('resetpaswoord').addEventListener('click', resetPassword);
  const popupResetPaswoord = document.getElementById("popupresetpaswoord");     
    document.getElementById("openresetpaswoord").addEventListener("click", function() {
          popupResetPaswoord.style.opacity = 1;
          popupResetPaswoord.style.visibility = "visible";
    });
    document.getElementById("closeresetpaswoord").addEventListener("click", function() {
          popupResetPaswoord.style.opacity = 0;
          popupResetPaswoord.style.visibility = "hidden";
    });

    function loginWithGoogle(event) {
  event.preventDefault();

  const provider = new GoogleAuthProvider();

  signInWithPopup(auth, provider)
    .then((result) => {
      const user = result.user;
      return user.getIdToken().then((idToken) => ({ idToken, userId: user.uid }));
    })
    .then(({ idToken, userId }) => {
      document.cookie = `token=${idToken}; path=/; Secure; SameSite=Strict; Max-Age=86400`;
      document.cookie = `userId=${userId}; path=/; Secure; SameSite=Strict; Max-Age=86400`;

      window.location.href = `/en/users/${userId}`;
    })
    .catch((error) => {
      console.error("Google login error:", error);
      const errorMessageEl = document.getElementById('error-message');
      errorMessageEl.textContent = "Connection error with Google.";
      errorMessageEl.style.display = "block";
    });
}

    document.getElementById('googlelogin').addEventListener('click', loginWithGoogle);
</script>
</body>
</html>
